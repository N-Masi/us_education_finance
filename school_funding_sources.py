# 1970: https://babel.hathitrust.org/cgi/pt?id=uiug.30112026512035&seq=67
# 1971: https://archive.org/details/ERIC_ED066833/page/n65/mode/2up
# 1972: https://files.eric.ed.gov/fulltext/ED083677.pdf
# 1973: https://files.eric.ed.gov/fulltext/ED088240.pdf
# 1974: https://files.eric.ed.gov/fulltext/ED104018.pdf
# 1975-1976: https://babel.hathitrust.org/cgi/pt?id=uc1.31210003971791&seq=231
# 1977: https://babel.hathitrust.org/cgi/pt?id=uc1.31210004879191&seq=326
# 1978-1979: https://babel.hathitrust.org/cgi/pt?id=uc1.31210008874784&seq=96
# 1980: https://babel.hathitrust.org/cgi/pt?id=uc1.31210011555974&seq=90
# 1981: https://babel.hathitrust.org/cgi/pt?id=uc1.31210011555909&seq=98
# 1982: unpublished, 1981 was in 21st ed. & 1983 was in 22nd ed.
# 1983: https://files.eric.ed.gov/fulltext/ED270903.pdf
# 1984-1985: https://files.eric.ed.gov/fulltext/ED282359.pdf
# 1986: https://files.eric.ed.gov/fulltext/ED295344.pdf
# 1987: https://files.eric.ed.gov/fulltext/ED312792.pdf
# 1988: https://files.eric.ed.gov/fulltext/ED330086.pdf
# 1989: https://files.eric.ed.gov/fulltext/ED340141.pdf
# 1990: https://files.eric.ed.gov/fulltext/ED349706.pdf
# 1991: https://files.eric.ed.gov/fulltext/ED362971.pdf
# 1992: https://files.eric.ed.gov/fulltext/ED377253.pdf
# 1993-2020: https://nces.ed.gov/programs/digest/current_tables.asp

# the dictionaries associate the year (which the academic year ends with) 
# with what percent of public elementary and secondary schools' (in the named region)
# revenue came from each of the different funding sources, as well as the total funding;
# if multiple reports reported on the same year, the first reported number was used
# (out of convenience sake, this is likely less accurate of a method);
# percentages are of revenue receipts & amounts are in thousands of dollars

# nonrevenue receipts, they exist through 1981 (I forgot to record prior to 1981),
# these amounts should be subtracted from the corresponding total_funding_ amount
# before diving the funding by the source percentages
nonrev_ca = {1981: 112414}
nonrev_us = {1981: 3925595}
nonrev_tx = {1981: 441784}

# includes total revenue and nonrevenue receipts through 1981, 1983 and after is only revenue receipts
total_funding_ca = {2020: 100127294, 2019: 100451374, 2018: 91630317, 2017: 88108864, 2016: 85779627, 2015: 74395627, 2014: 69342921, 2013: 66026445, 2012: 65808329, 2011: 67864062, 2010: 64130242, 2009: 70687012, 2008: 71224024, 2007: 69557257, 2006: 63785872, 2005: 59481350, 2004: 57598368, 2003: 57021363, 2002: 52252109, 2001: 51007510, 2000: 45058305, 1999: 40002760, 1998: 38142613, 1997: 34477895, 1996: 30858564, 1995: 28891301, 1994: 29050409, 1993: 28039018, 1992: 26868216, 1991: 25266899, 1990: 24320281, 1989: 22208938, 1988: 17884769, 1987: 17219479, 1986: 16007881, 1985: 14122187, 1984: 12618312, 1983: 11210600, 1981: 11314099, 1980: 10568591, 1979: 9402187, 1978: 9458394, 1977: 8558460, 1976: 7013788, 1975: 7435823, 1974: 7142590, 1973: 6058348, 1970: 4830000, 1971: 4584000, 1972: 4776291}
total_funding_us = {2020: 794568095, 2019: 764716225, 2018: 734244219, 2017: 705267398, 2016: 678378476, 2015: 647679130, 2014: 623208803, 2013: 603686987, 2012: 600488586, 2011: 604293209, 2010: 597485869, 2009: 593061181, 2008: 584728896, 2007: 555337583, 2006: 520643954, 2005: 487761164, 2004: 462015502, 2003: 440157299, 2002: 419501976, 2001: 400919024, 2000: 372864603, 1999: 347329664, 1998: 325976011, 1997: 305051963, 1996: 287702844, 1995: 273137899, 1994: 260142087, 1993: 248496276, 1992: 234485729, 1991: 222822499, 1990: 207583910, 1989: 191210310, 1988: 169650907, 1987: 158827473, 1986: 149004882, 1985: 137350722, 1984: 126055419, 1983: 116911604, 1981: 109830503, 1980: 100554463, 1979: 91890485, 1978: 84969058, 1977: 79248688, 1976: 70273125, 1975: 64456429, 1974: 60238403, 1973: 55094157, 1970: 42057457, 1971: 45268215, 1972: 50127357}
total_funding_tx = {2020: 70617931, 2019: 66946288, 2018: 63244529, 2017: 60006975, 2016: 58954734, 2015: 56127791, 2014: 53377147, 2013: 50053709, 2012: 49533579, 2011: 50874695, 2010: 50045607, 2009: 46962119, 2008: 45574722, 2007: 43282278, 2006: 39691436, 2005: 36798422, 2004: 35409121, 2003: 34605869, 2002: 32281850, 2001: 30469570, 2000: 28657019, 1999: 25647339, 1998: 24179060, 1997: 22372808, 1996: 21689792, 1995: 19678883, 1994: 18744302, 1993: 17446887, 1992: 16891646, 1991: 15407772, 1990: 13948117, 1989: 13110312, 1988: 12812869, 1987: 11900931, 1986: 11345065, 1985: 10780134, 1984: 9257592, 1983: 8259038, 1981: 7146258, 1980: 6482058, 1979: 5605701, 1978: 4735430, 1977: 4654751, 1976: 4013248, 1975: 3155357, 1974: 2933205, 1973: 2758737, 1970: 2022200, 1971: 2236015, 1972: 2596563}

# percent of revenue coming from the federal government
fed_perc_ca = {2020: 7.9, 2019: 8, 2018: 8.4, 2017: 8.5, 2016: 8.5, 2015: 9.6, 2014: 10, 2013: 11.2, 2012: 12.6, 2011: 13.6, 2010: 13.8, 2009: 13, 2008: 9.4, 2007: 9.6, 2006: 10.8, 2005: 11.2, 2004: 10.9, 2003: 9.9, 2002: 9.3, 2001: 8.2, 2000: 8.7, 1999: 8.6, 1998: 8.2, 1997: 8.2, 1996: 8.9, 1995: 9.5, 1994: 8.9, 1993: 8, 1992: 7.5, 1991: 7.2, 1990: 6.6, 1989: 7, 1988: 7.3, 1987: 7.1, 1986: 7.3, 1985: 7.9, 1984: 8.3, 1983: 8.8, 1981: 10.1, 1980: 10.7, 1979: 10.7, 1978: 9.8, 1977: 8.6, 1976: 9.2, 1975: 9, 1974: 6.7, 1973: 6.8, 1970: 5.2, 1971: 5.1, 1972: 6.1}
fed_perc_us = {2020: 7.6, 2019: 7.9, 2018: 7.8, 2017: 8.1, 2016: 8.3, 2015: 8.5, 2014: 8.7, 2013: 9.3, 2012: 10.2, 2011: 12.5, 2010: 12.7, 2009: 9.6, 2008: 8.2, 2007: 8.5, 2006: 9.1, 2005: 9.2, 2004: 9.1, 2003: 8.5, 2002: 7.9, 2001: 7.3, 2000: 7.3, 1999: 7.1, 1998: 6.8, 1997: 6.6, 1996: 6.6, 1995: 6.8, 1994: 7, 1993: 6.9, 1992: 6.6, 1991: 6.2, 1990: 6.1, 1989: 6.2, 1988: 6.3, 1987: 6.4, 1986: 6.7, 1985: 6.5, 1984: 6.8, 1983: 7.1, 1981: 9.3, 1980: 9.8, 1979: 9.8, 1978: 9.5, 1977: 8.8, 1976: 8, 1975: 7.8, 1974: 7.5, 1973: 7.7, 1970: 6.6, 1971: 6.9, 1972: 7.1}
fed_perc_tx = {2020: 10.3, 2019: 10.9, 2018: 10.5, 2017: 10.5, 2016: 10.6, 2015: 10.8, 2014: 11, 2013: 11.7, 2012: 12.7, 2011: 15.7, 2010: 15.6, 2009: 10.7, 2008: 10, 2007: 10.3, 2006: 12, 2005: 11.2, 2004: 10.8, 2003: 9.9, 2002: 9.3, 2001: 8.7, 2000: 8.6, 1999: 8.5, 1998: 7.6, 1997: 7.7, 1996: 7.2, 1995: 7.7, 1994: 8.1, 1993: 7.5, 1992: 6.6, 1991: 6.6, 1990: 7.3, 1989: 7.5, 1988: 7.8, 1987: 7.1, 1986: 7.4, 1985: 6.6, 1984: 8.2, 1983: 9.6, 1981: 11.1, 1980: 11.6, 1979: 11.9, 1978: 10.6, 1977: 11.7, 1976: 10.4, 1975: 10.2, 1974: 11, 1973: 10.7, 1970: 9.2, 1971: 10, 1972: 8.5}

# percent of revenue coming from the state government
state_perc_ca = {2020: 56.8, 2019: 58, 2018: 56.5, 2017: 57.7, 2016: 59.4, 2015: 57.2, 2014: 56.7, 2013: 54.3, 2012: 56.3, 2011: 56.6, 2010: 54.2, 2009: 57.4, 2008: 61.3, 2007: 61.5, 2006: 59.3, 2005: 59.2, 2004: 55.6, 2003: 58.9, 2002: 59.4, 2001: 61.5, 2000: 60.3, 1999: 59.3, 1998: 60.2, 1997: 60, 1996: 55.8, 1995: 54.2, 1994: 56.2, 1993: 62.2, 1992: 65.9, 1991: 66, 1990: 66.9, 1989: 66.4, 1988: 70.2, 1987: 69.5, 1986: 68.9, 1985: 67.5, 1984: 67.4, 1983: 68.1, 1981: 65.8, 1980: 66.3, 1979: 61.9, 1978: 38.8, 1977: 40.4, 1976: 40.4, 1975: 38.6, 1974: 42.1, 1973: 36.7, 1970: 35, 1971: 35.2, 1972: 34.8}
state_perc_us = {2020: 47.5, 2019: 46.7, 2018: 46.8, 2017: 47, 2016: 47, 2015: 46.6, 2014: 46.2, 2013: 45.2, 2012: 45.2, 2011: 44.1, 2010: 43.5, 2009: 46.7, 2008: 48.3, 2007: 47.6, 2006: 46.5, 2005: 46.9, 2004: 47.1, 2003: 48.7, 2002: 49.2, 2001: 49.7, 2000: 49.5, 1999: 48.7, 1998: 48.4, 1997: 48, 1996: 47.5, 1995: 46.8, 1994: 45.2, 1993: 45.6, 1992: 46.4, 1991: 47.3, 1990: 47.2, 1989: 47.7, 1988: 49.5, 1987: 49.8, 1986: 49.4, 1985: 48.8, 1984: 47.8, 1983: 48.3, 1981: 47.4, 1980: 46.8, 1979: 45.7, 1978: 43, 1977: 43.4, 1976: 43.7, 1975: 43.6, 1974: 43, 1973: 41, 1970: 40.7, 1971: 41.1, 1972: 40.9}
state_perc_tx = {2020: 38.4, 2019: 36.6, 2018: 37.4, 2017: 38.9, 2016: 40.9, 2015: 40.6, 2014: 41.5, 2013: 40.2, 2012: 41.1, 2011: 40.2, 2010: 39.4, 2009: 42.5, 2008: 44.8, 2007: 37.8, 2006: 33.8, 2005: 35.9, 2004: 38.6, 2003: 40.9, 2002: 40.8, 2001: 42.2, 2000: 44.2, 1999: 42.4, 1998: 44.2, 1997: 40.3, 1996: 42.9, 1995: 40.2, 1994: 40.2, 1993: 40, 1992: 43.4, 1991: 43.9, 1990: 41.9, 1989: 43.3, 1988: 44.2, 1987: 47.1, 1986: 47.6, 1985: 47.1, 1984: 45.3, 1983: 50, 1981: 48.4, 1980: 49.1, 1979: 47.6, 1978: 51.2, 1977: 46.7, 1976: 50.1, 1975: 48.4, 1974: 47.5, 1973: 46.3, 1970: 42.8, 1971: 49.3, 1972: 48.1}

# percent of revenue coming from the local government
local_perc_ca = {2020: 35.3, 2019: 34, 2018: 35.1, 2017: 33.8, 2016: 32.1, 2015: 33.2, 2014: 33.3, 2013: 34.5, 2012: 31.1, 2011: 29.8, 2010: 32, 2009: 28.8, 2008: 28.5, 2007: 28, 2006: 28.9, 2005: 28.6, 2004: 32.5, 2003: 30.3, 2002: 30.3, 2001: 29.3, 2000: 29.9, 1999: 30.9, 1998: 30.6, 1997: 30.8, 1996: 34.2, 1995: 35.1, 1994: 33.8, 1993: 28.6, 1992: 25.4, 1991: 25.6, 1990: 26.5, 1989: 26.6, 1988: 22.5, 1987: 23.5, 1986: 23.8, 1985: 24.5, 1984: 24.4, 1983: 23.1, 1981: 24.1, 1980: 23, 1979: 27.4, 1978: 51.4, 1977: 51, 1976: 50.4, 1975: 52.4, 1974: 51.2, 1973: 56.5, 1970: 59.8, 1971: 59.8, 1972: 59.1}
local_perc_us = {2020: 44.9, 2019: 45.4, 2018: 45.3, 2017: 44.9, 2016: 44.8, 2015: 45, 2014: 45, 2013: 45.5, 2012: 44.6, 2011: 43.4, 2010: 43.8, 2009: 41.7, 2008: 41.4, 2007: 41.8, 2006: 42.1, 2005: 41.7, 2004: 41.6, 2003: 40.5, 2002: 40.5, 2001: 40.8, 2000: 40.9, 1999: 41.7, 1998: 42.3, 1997: 42.9, 1996: 43.2, 1995: 43.8, 1994: 45.1, 1993: 44.7, 1992: 44.3, 1991: 44.1, 1990: 46.6, 1989: 46.1, 1988: 44.1, 1987: 43.9, 1986: 43.9, 1985: 44.7, 1984: 45.4, 1983: 44.6, 1981: 43.3, 1980: 43.4, 1979: 44.5, 1978: 47.6, 1977: 47.8, 1976: 48.4, 1975: 48.6, 1974: 49.5, 1973: 51.2, 1970: 52.7, 1971: 52, 1972: 52}
local_perc_tx = {2020: 51.3, 2019: 52.5, 2018: 52.1, 2017: 50.6, 2016: 48.6, 2015: 48.6, 2014: 47.5, 2013: 48, 2012: 46.2, 2011: 44.2, 2010: 45, 2009: 44.8, 2008: 43.2, 2007: 49.9, 2006: 52, 2005: 50.7, 2004: 48.3, 2003: 47, 2002: 47.6, 2001: 46.8, 2000: 44.9, 1999: 46.7, 1998: 45.8, 1997: 49.4, 1996: 47.2, 1995: 49.4, 1994: 48.9, 1993: 49.6, 1992: 47.2, 1991: 46.6, 1990: 50.8, 1989: 49.3, 1988: 48.1, 1987: 45.8, 1986: 45, 1985: 46.3, 1984: 46.5, 1983: 40.4, 1981: 40.5, 1980: 39.3, 1979: 40.6, 1978: 38.1, 1977: 41.7, 1976: 39.5, 1975: 41.4, 1974: 41.5, 1973: 43, 1970: 48, 1971: 40.7, 1972: 43.4}

# this is the subset of the local_perc (local revenues) as a % of all revenue
# (not the % of local revenue) which specifically come from the property taxes
prop_tax_ca = {2020: 28.6, 2019: 27.3, 2018: 28.1, 2017: 27.4, 2016: 25.9, 2015: 26.6, 2014: 26.5, 2013: 27.8, 2012: 24.4, 2011: 23.7, 2010: 25.5}
prop_tax_us = {2020: 36.5, 2019: 36.5, 2018: 36.6, 2017: 36.6, 2016: 36.4, 2015: 36.4, 2014: 36.4, 2013: 36.8, 2012: 35.9, 2011: 35, 2010: 35.3}
prop_tax_tx = {2020: 46.8, 2019: 47.2, 2018: 46.8, 2017: 46.1, 2016: 44.4, 2015: 44.6, 2014: 43.5, 2013: 43.7, 2012: 41.9, 2011: 40.1, 2010: 40.8}

# starting with academic year ending in 2010 (part of the 2012 digest) private was considered part of
# the Local (including Intermediate) revenue, it will be considered Local for all years of graphing
private_perc_ca = {2009: 0.7, 2008: 0.8, 2007: 0.9, 2006: 0.9, 2005: 1, 2004: 1, 2003: 1, 2002: 1.1, 2001: 1, 2000: 1.1, 1999: 1.1, 1998: 1.1, 1997: 1.1, 1996: 1.2, 1995: 1.2, 1994: 1.1, 1993: 1.2, 1992: 1.2, 1991: 1.2}
private_perc_us = {2009: 2.1, 2008: 2.1, 2007: 2.1, 2006: 2.2, 2005: 2.3, 2004: 2.3, 2003: 2.3, 2002: 2.3, 2001: 2.3, 2000: 2.4, 1999: 2.5, 1998: 2.6, 1997: 2.5, 1996: 2.6, 1995: 2.7, 1994: 2.7, 1993: 2.7, 1992: 2.7, 1991: 2.5}
private_perc_tx = {2009: 2, 2008: 2.1, 2007: 2.1, 2006: 2.2, 2005: 2.2, 2004: 2.2, 2003: 2.2, 2002: 2.3, 2001: 2.3, 2000: 2.4, 1999: 2.5, 1998: 2.4, 1997: 2.5, 1996: 2.6, 1995: 2.8, 1994: 2.7, 1993: 2.9, 1992: 2.8, 1991: 2.9}

# TEST --- sanity checks
for year in fed_perc_us:
    for s in ['ca', 'us', 'tx']:

        # check summation
        total_perc = globals()['fed_perc_'+s][year]+globals()['state_perc_'+s][year]+globals()['local_perc_'+s][year]
        if year in globals()['private_perc_'+s]:
            total_perc += globals()['private_perc_'+s][year]
        if total_perc <= 98.89 or total_perc >= 100.11:
            print("PERCENT SUM ERROR:", s, year, total_perc)
        
        # check the property tax percentage
        if year in globals()['prop_tax_'+s]:
            if globals()['prop_tax_'+s][year] > globals()['local_perc_'+s][year]:
                print("PROP TAX ERROR:", s, year)

        # check absolute values of totals
        if (max(globals()['total_funding_ca'][year], globals()['total_funding_tx'][year]) >= globals()['total_funding_us'][year]) or (min(globals()['total_funding_ca'][year], globals()['total_funding_tx'][year]) <= 1000000) or (globals()['total_funding_ca'][year]/globals()['total_funding_tx'][year] > 2.5):
            print("TOTAL FUNDING ERROR:", year)
